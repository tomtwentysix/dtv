out: === Nginx Logs ===
out: Attaching to dt-visuals-nginx
out: dt-visuals-nginx | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
out: dt-visuals-nginx | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
out: dt-visuals-nginx | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
out: dt-visuals-nginx | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
out: dt-visuals-nginx | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
out: dt-visuals-nginx | /docker-entrypoint.sh: Configuration complete; ready for start up
out: dt-visuals-nginx | 2025/08/11 21:24:12 [emerg] 1#1: host not found in upstream "app-prod:5000" in /etc/nginx/nginx.conf:33
out: dt-visuals-nginx | nginx: [emerg] host not found in upstream "app-prod:5000" in /etc/nginx/nginx.conf:33
out: dt-visuals-nginx | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
out: dt-visuals-nginx | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
out: dt-visuals-nginx | 10-listen-on-ipv6-by-default.sh: info: IPv6 listen already enabled
out: dt-visuals-nginx | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
out: dt-visuals-nginx | /docker-entrypoint.sh: Configuration complete; ready for start up
out: dt-visuals-nginx | 2025/08/11 21:24:21 [emerg] 1#1: host not found in upstream "app-prod:5000" in /etc/nginx/nginx.conf:33
out: dt-visuals-nginx | nginx: [emerg] host not found in upstream "app-prod:5000" in /etc/nginx/nginx.conf:33
out: dt-visuals-nginx | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
out: dt-visuals-nginx | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
out: dt-visuals-nginx | 10-listen-on-ipv6-by-default.sh: info: IPv6 listen already enabled
out: dt-visuals-nginx | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
out: dt-visuals-nginx | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
out: dt-visuals-nginx | /docker-entrypoint.sh: Configuration complete; ready for start up
out: === Production App Logs ===
out: Attaching to dt-visuals-prod
out: dt-visuals-prod |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
out: dt-visuals-prod |     at async initializeDatabase (file:///app/dist/index.js:2020:23)
out: dt-visuals-prod |     at async file:///app/dist/index.js:2208:5 {
out: dt-visuals-prod |   length: 104,
out: dt-visuals-prod |   severity: 'ERROR',
out: dt-visuals-prod |   code: '42P01',
out: dt-visuals-prod |   detail: undefined,
out: dt-visuals-prod |   hint: undefined,
out: dt-visuals-prod |   position: '22',
out: dt-visuals-prod |   internalPosition: undefined,
out: dt-visuals-prod |   internalQuery: undefined,
out: dt-visuals-prod |   where: undefined,
out: dt-visuals-prod |   schema: undefined,
out: dt-visuals-prod |   table: undefined,
out: dt-visuals-prod |   column: undefined,
out: dt-visuals-prod |   dataType: undefined,
out: dt-visuals-prod |   constraint: undefined,
out: dt-visuals-prod |   file: 'parse_relation.c',
out: dt-visuals-prod |   line: '1392',
out: dt-visuals-prod |   routine: 'parserOpenTable'
out: dt-visuals-prod | }
out: dt-visuals-prod | Server will continue but some features may not work properly
out: dt-visuals-prod | Error initializing RBAC: error: relation "permissions" does not exist
out: dt-visuals-prod |     at /app/node_modules/pg-pool/index.js:45:11
out: dt-visuals-prod |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
out: dt-visuals-prod |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
out: dt-visuals-prod |     at async DatabaseStorage.getPermissionByName (file:///app/dist/index.js:635:26)
out: dt-visuals-prod |     at async initializeRBAC (file:///app/dist/index.js:1149:24)
out: dt-visuals-prod |     at async registerRoutes (file:///app/dist/index.js:1211:3)
out: dt-visuals-prod |     at async file:///app/dist/index.js:2213:18 {
out: dt-visuals-prod |   length: 110,
out: dt-visuals-prod |   severity: 'ERROR',
out: dt-visuals-prod |   code: '42P01',
out: dt-visuals-prod |   detail: undefined,
out: dt-visuals-prod |   hint: undefined,
out: dt-visuals-prod |   position: '41',
out: dt-visuals-prod |   internalPosition: undefined,
out: dt-visuals-prod |   internalQuery: undefined,
out: dt-visuals-prod |   where: undefined,
out: dt-visuals-prod |   schema: undefined,
out: dt-visuals-prod |   table: undefined,
out: dt-visuals-prod |   column: undefined,
out: dt-visuals-prod |   dataType: undefined,
out: dt-visuals-prod |   constraint: undefined,
out: dt-visuals-prod |   file: 'parse_relation.c',
out: dt-visuals-prod |   line: '1392',
out: dt-visuals-prod |   routine: 'parserOpenTable'
out: dt-visuals-prod | }
out: dt-visuals-prod | 9:24:05 PM [express] serving on port 5000
out: dt-visuals-prod | 9:24:09 PM [express] GET /api/health 200 in 4ms :: {"status":"healthy","timestamp":"2025-08-11T21:24…
out: === Development App Logs ===
out: Attaching to dt-visuals-dev
out: dt-visuals-dev | 
out: dt-visuals-dev | > rest-express@1.0.0 db:push
out: dt-visuals-dev | > drizzle-kit push
out: dt-visuals-dev | 
out: dt-visuals-dev | No config path provided, using default 'drizzle.config.ts'
out: dt-visuals-dev | Reading config file '/app/drizzle.config.ts'
out: dt-visuals-dev | Using 'pg' driver for database querying
out: dt-visuals-dev | [⣷] Pulling schema from database...
out: dt-visuals-dev | [⣯] Pulling schema from database...
out: dt-visuals-dev | [⣟] Pulling schema from database...
out: dt-visuals-dev | [⡿] Pulling schema from database...
out: dt-visuals-dev | [⢿] Pulling schema from database...
out: dt-visuals-dev | [⣻] Pulling schema from database...
out: dt-visuals-dev | [⣽] Pulling schema from database...
out: dt-visuals-dev | [✓] Pulling schema from database...
out: dt-visuals-dev | [i] No changes detected
out: dt-visuals-dev | npm notice
out: dt-visuals-dev | npm notice New major version of npm available! 10.8.2 -> 11.5.2
out: dt-visuals-dev | npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
out: dt-visuals-dev | npm notice To update run: npm install -g npm@11.5.2
out: dt-visuals-dev | npm notice
out: dt-visuals-dev | 
out: dt-visuals-dev | > rest-express@1.0.0 dev
out: dt-visuals-dev | > NODE_ENV=development tsx server/index.ts
out: dt-visuals-dev | 
out: dt-visuals-dev | 🐳 Using local PostgreSQL for Docker environment
out: dt-visuals-dev | 🌍 Environment detected: local
out: dt-visuals-dev | 💾 Database: ***n1ght@db-dev:5432/dt...
out: dt-visuals-dev | 🔧 Initializing database for current environment...
out: dt-visuals-dev | 📝 Database appears empty, creating essential data...
out: dt-visuals-dev | Creating essential roles and permissions...
out: dt-visuals-dev | Created base roles
out: dt-visuals-dev | Created permissions
out: dt-visuals-dev | Assigned permissions to roles
out: dt-visuals-dev | Created admin user: admin@dtvisuals.com / admin123
out: dt-visuals-dev | Assigned admin role to user
out: dt-visuals-dev | ✅ Database initialization completed successfully
out: dt-visuals-dev | 9:24:10 PM [express] serving on port 5000
out: Total reclaimed space: 0B
==============================================
✅ Successfully executed commands to all host.
==============================================